{"version":3,"file":"index.mjs","sources":["../../src/preload/index.ts"],"sourcesContent":["import { contextBridge, ipcRenderer } from 'electron';\n\nconst validChannels = new Set(['workspace:changed', 'git:changed', 'diff:changed']);\n\ntype AppEvent = 'workspace:changed' | 'git:changed' | 'diff:changed';\n\ncontextBridge.exposeInMainWorld('openApp', {\n  ping: () => ipcRenderer.invoke('ping'),\n  workspace: {\n    list: () => ipcRenderer.invoke('workspace:list'),\n    recent: (limit?: number) => ipcRenderer.invoke('workspace:recent', limit),\n    discover: (options?: {\n      roots?: string[];\n      maxDepth?: number;\n      limit?: number;\n      includeIgnored?: boolean;\n    }) =>\n      ipcRenderer.invoke('workspace:discover', options),\n    ignored: {\n      list: () => ipcRenderer.invoke('workspace:ignored:list'),\n      add: (dirPath: string) => ipcRenderer.invoke('workspace:ignored:add', dirPath),\n      remove: (dirPath: string) => ipcRenderer.invoke('workspace:ignored:remove', dirPath)\n    },\n    current: () => ipcRenderer.invoke('workspace:current'),\n    add: (dirPath: string) => ipcRenderer.invoke('workspace:add', dirPath),\n    pick: () => ipcRenderer.invoke('workspace:pick'),\n    set: (id: string) => ipcRenderer.invoke('workspace:set', id),\n    rename: (id: string, name: string) => ipcRenderer.invoke('workspace:rename', id, name),\n    remove: (id: string) => ipcRenderer.invoke('workspace:remove', id)\n  },\n  git: {\n    summary: () => ipcRenderer.invoke('git:summary'),\n    status: () => ipcRenderer.invoke('git:status'),\n    files: () => ipcRenderer.invoke('git:files')\n  },\n  diff: {\n    current: () => ipcRenderer.invoke('diff:current'),\n    file: (filePath: string) => ipcRenderer.invoke('diff:file', filePath)\n  },\n  events: {\n    on: (channel: AppEvent, handler: () => void) => {\n      if (!validChannels.has(channel)) return () => {};\n      const listener = () => handler();\n      ipcRenderer.on(channel, listener);\n      return () => ipcRenderer.removeListener(channel, listener);\n    }\n  }\n});\n"],"names":[],"mappings":";AAEA,MAAM,gBAAgB,oBAAI,IAAI,CAAC,qBAAqB,eAAe,cAAc,CAAC;AAIlF,cAAc,kBAAkB,WAAW;AAAA,EACzC,MAAM,MAAM,YAAY,OAAO,MAAM;AAAA,EACrC,WAAW;AAAA,IACT,MAAM,MAAM,YAAY,OAAO,gBAAgB;AAAA,IAC/C,QAAQ,CAAC,UAAmB,YAAY,OAAO,oBAAoB,KAAK;AAAA,IACxE,UAAU,CAAC,YAMT,YAAY,OAAO,sBAAsB,OAAO;AAAA,IAClD,SAAS;AAAA,MACP,MAAM,MAAM,YAAY,OAAO,wBAAwB;AAAA,MACvD,KAAK,CAAC,YAAoB,YAAY,OAAO,yBAAyB,OAAO;AAAA,MAC7E,QAAQ,CAAC,YAAoB,YAAY,OAAO,4BAA4B,OAAO;AAAA,IAAA;AAAA,IAErF,SAAS,MAAM,YAAY,OAAO,mBAAmB;AAAA,IACrD,KAAK,CAAC,YAAoB,YAAY,OAAO,iBAAiB,OAAO;AAAA,IACrE,MAAM,MAAM,YAAY,OAAO,gBAAgB;AAAA,IAC/C,KAAK,CAAC,OAAe,YAAY,OAAO,iBAAiB,EAAE;AAAA,IAC3D,QAAQ,CAAC,IAAY,SAAiB,YAAY,OAAO,oBAAoB,IAAI,IAAI;AAAA,IACrF,QAAQ,CAAC,OAAe,YAAY,OAAO,oBAAoB,EAAE;AAAA,EAAA;AAAA,EAEnE,KAAK;AAAA,IACH,SAAS,MAAM,YAAY,OAAO,aAAa;AAAA,IAC/C,QAAQ,MAAM,YAAY,OAAO,YAAY;AAAA,IAC7C,OAAO,MAAM,YAAY,OAAO,WAAW;AAAA,EAAA;AAAA,EAE7C,MAAM;AAAA,IACJ,SAAS,MAAM,YAAY,OAAO,cAAc;AAAA,IAChD,MAAM,CAAC,aAAqB,YAAY,OAAO,aAAa,QAAQ;AAAA,EAAA;AAAA,EAEtE,QAAQ;AAAA,IACN,IAAI,CAAC,SAAmB,YAAwB;AAC9C,UAAI,CAAC,cAAc,IAAI,OAAO,UAAU,MAAM;AAAA,MAAC;AAC/C,YAAM,WAAW,MAAM,QAAA;AACvB,kBAAY,GAAG,SAAS,QAAQ;AAChC,aAAO,MAAM,YAAY,eAAe,SAAS,QAAQ;AAAA,IAC3D;AAAA,EAAA;AAEJ,CAAC;"}